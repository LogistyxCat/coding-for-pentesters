#!/usr/bin/ruby

#Name: Riley Scott
#Date: 2017-11-14
#Version: 1.0
#Description: Extract server type and powered-by info from HTTP header request, now with classes

require 'net/http'

class MyHead
  def initialize(host,port = nil)
    @host = host
    @port = port || 80
  end

  def getHeader()
    Net::HTTP.start(@host.to_s,@port) do |http|
      resp = http.head('/')
      return [resp['server'].to_s ,resp['x-powered-by'].to_s]
    end

    return [nil,nil]
  end
end

if ARGV.size <=0 || ARGV.size > 2
  print "Useage: #{$0} Host [Port]\n"
  exit
end

head = MyHead.new(ARGV[0],ARGV[1])
server, mods = head.getHeader()
print "Server #{server} (#{mods})\n"
